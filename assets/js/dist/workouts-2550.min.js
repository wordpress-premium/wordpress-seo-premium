(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.React,r=window.wp.domReady;var n=e.n(r);const o=window.yoast.componentsNew,s=window.yoast.propTypes;var a=e.n(s);const l=window.wp.element,i=window.wp.data,c=window.wp.compose,m=window.wp.i18n;function d({onClick:e,isFinished:r}){const n=r?(0,m.__)("Revise this step","wordpress-seo-premium"):(0,m.__)("I've finished this step","wordpress-seo-premium");return(0,t.createElement)(o.Button,{onClick:e},n)}function u(){return(0,t.createElement)("span",{className:"dashicons dashicons-external",style:{textDecoration:"none",fontSize:"12px",width:"16px",height:"0",lineHeight:"1.4"}})}d.propTypes={isFinished:a().bool.isRequired,onClick:a().func.isRequired};const p=(e,t)=>{try{return(0,l.createInterpolateElement)(e,t)}catch(t){return console.error("Error in translation for:",e,t),e}};function h({url:e}){return(0,t.createElement)(o.Alert,{type:"warning"},p((0,m.sprintf)(/* translators: %1$s expands to an opening anchor tag. %2$s expands to a closing anchor tag */ /* translators: %1$s expands to an opening anchor tag. %2$s expands to a closing anchor tag */
(0,m.__)("Please note: For this workout to work well, you need to run the SEO data optimization tool. Admins can run this under %1$sSEO > Tools%2$s.","wordpress-seo-premium"),"<a>","</a>"),{a:(0,t.createElement)("a",{href:e})}))}function k({url:e}){return(0,t.createElement)(o.Alert,{type:"warning"},p((0,m.sprintf)(/* translators: %1$s expands to an opening anchor tag. %2$s expands to a closing anchor tag */ /* translators: %1$s expands to an opening anchor tag. %2$s expands to a closing anchor tag */
(0,m.__)("Please note: For this workout to work well and to offer you linking suggestions, you need to run the SEO data optimization tool. Admins can run this under %1$sSEO > Tools%2$s.","wordpress-seo-premium"),"<a>","</a>"),{a:(0,t.createElement)("a",{href:e})}))}h.propTypes={url:a().string.isRequired},k.propTypes={url:a().string.isRequired};const _=window.yoast.analysis,y=window.wp.apiFetch;var E=e.n(y);const b=window.yoast.styleGuide;function w(e){return jQuery("<div>").html(e).text()}function g(e){const t={icon:"circle",color:b.colors.$color_grey_disabled};switch(e){case"loading":t.color=b.colors.$color_green_medium_light;break;case"good":t.color=b.colors.$color_green_medium;break;case"ok":t.color=b.colors.$color_ok;break;case"bad":t.color=b.colors.$color_red}return t}async function f(e,t){try{const r=await E()({path:"yoast/v1/workouts/link_suggestions?indexableId="+e.id}),n=await r.json;return t(n),n}catch(e){return t([]),console.error(e.message),!1}}async function v(e){try{const t=await E()({path:"yoast/v1/workouts/cornerstone_data"}),r=await t.json;return e(r),r}catch(t){return e([]),console.error(t.message),!1}}async function x(e,t){try{const r=await E()({path:"yoast/v1/workouts/remove_redirect",method:"POST",data:{object_id:e.object_id,object_type:e.object_type,object_sub_type:e.object_sub_type,permalink:e.permalink,redirect_url:t}});return await r.json}catch(e){return console.error(e.message),!1}}const C=window.yoast.reactSelectAsync;var R=e.n(C);const S=window.lodash,{scoreToRating:I}=_.interpreters;function N({indexable:e}){return(0,t.createElement)("tr",null,(0,t.createElement)("td",null,(0,t.createElement)(o.SvgIcon,{...g(I(e.primary_focus_keyword_score/10))})),(0,t.createElement)("td",null,(0,t.createElement)(o.SvgIcon,{...g(I(e.readability_score/10))})),(0,t.createElement)("td",null,(0,t.createElement)("a",{href:e.permalink,target:"_blank",rel:"noopener noreferrer"},w(e.breadcrumb_title),(0,t.createElement)(u,null))),(0,t.createElement)("td",null,e.primary_focus_keyword||"-"))}function q({indexables:e,loading:r,setCornerstones:n,isDisabled:o}){const s=(0,m.__)("SEO score","wordpress-seo-premium"),a=(0,m.__)("Readability score","wordpress-seo-premium"),i=(0,l.useCallback)((0,S.debounce)(((e,t)=>{!async function(e,t){try{const r=await E()({path:"wp/v2/search/?search="+e});let n=await r;return n=n.map((e=>({value:e.id,label:e.title+" ("+e.url+")",type:e.type}))),t(n),n}catch(e){return t([]),console.error(e.message),!1}}(e,t)}),500),[]),c=(0,l.useCallback)((e=>{!async function(e,t,r){try{return await E()({path:"yoast/v1/workouts/enable_cornerstone",method:"POST",data:{object_id:e,object_type:t}}),await v(r)}catch(e){return console.error(e.message),!1}}(e.value,e.type,n)}),[n]);return r?(0,t.createElement)("div",null,(0,t.createElement)("em",null,(0,m.__)("Loading data...","wordpress-seo-premium"))):e.length<=0?(0,t.createElement)("div",null,(0,t.createElement)("p",null,(0,t.createElement)("em",null,(0,m.__)("You currently have no articles marked as cornerstone. When you mark your articles as cornerstone, they will show up here.","wordpress-seo-premium"))),(0,t.createElement)(R(),{value:"",onChange:c,cacheOptions:!0,loadOptions:i,defaultOptions:!0,placeholder:(0,m.__)("Choose cornerstone articles...","wordpress-seo-premium"),isDisabled:o})):(0,t.createElement)("div",null,(0,t.createElement)("table",{className:"yoast_help"},(0,t.createElement)("thead",null,(0,t.createElement)("tr",null,(0,t.createElement)("th",{className:"manage-column"},(0,t.createElement)("span",{"data-label":s,className:"yoast-tooltip yoast-tooltip-n yoast-tooltip-alt"},(0,t.createElement)("span",{className:"yoast-column-seo-score yoast-column-header-has-tooltip"},(0,t.createElement)("span",{className:"screen-reader-text"},s)))),(0,t.createElement)("th",{className:"manage-column"},(0,t.createElement)("span",{"data-label":a,className:"yoast-tooltip yoast-tooltip-n yoast-tooltip-alt"},(0,t.createElement)("span",{className:"yoast-column-readability yoast-column-header-has-tooltip"},(0,t.createElement)("span",{className:"screen-reader-text"},a)))),(0,t.createElement)("th",null,(0,m.__)("Article","wordpress-seo-premium")),(0,t.createElement)("th",null,(0,m.__)("Focus keyphrase","wordpress-seo-premium")))),(0,t.createElement)("tbody",null,e.map((function(e){return(0,t.createElement)(N,{key:e.id,indexable:e})})))),(0,t.createElement)(R(),{value:"",onChange:c,cacheOptions:!0,loadOptions:i,defaultOptions:!0,placeholder:(0,m.__)("Choose cornerstone articles...","wordpress-seo-premium"),isDisabled:o}))}N.propTypes={indexable:a().object.isRequired},q.propTypes={indexables:a().arrayOf(a().object).isRequired,loading:a().bool.isRequired,setCornerstones:a().func.isRequired,isDisabled:a().bool.isRequired};const L={cornerstone:"cornerstone",orphaned:"orphaned"},W={cornerstone:{chooseCornerstones:"chooseCornerstones",checkLinks:"checkLinks",addLinks:"addLinks",improved:"improved",skipped:"skipped"},orphaned:{improveRemove:"improveRemove",update:"update",addLinks:"addLinks",removed:"removed",noindexed:"noindexed",improved:"improved",skipped:"skipped"}};function T({indexable:e,moveIndexables:r,improvableIds:n}){const s=(0,l.useCallback)((()=>{r(L.cornerstone,[e],"",W.cornerstone.addLinks)}),[r,e]);let a;return a=n.includes(e.id)?(0,t.createElement)("em",null,(0,m.__)("Added to next step","wordpress-seo-premium")):(0,t.createElement)(o.Button,{onClick:s},(0,m.__)("Optimize","wordpress-seo-premium")),(0,t.createElement)("tr",null,(0,t.createElement)("td",null,e.incoming_link_count||"0"),(0,t.createElement)("td",null,"1"===e.is_cornerstone?"★ ":"",(0,t.createElement)("a",{href:e.permalink,target:"_blank",rel:"noopener noreferrer"},w(e.breadcrumb_title),(0,t.createElement)(u,null))),(0,t.createElement)("td",null,e.object_sub_type||e.object_type),(0,t.createElement)("td",null,"1"===e.is_cornerstone&&a))}function O({mostLinked:e,cornerstones:r,moveIndexables:n,improvableIds:o,loading:s}){if(s)return(0,t.createElement)("div",null,(0,t.createElement)("em",null,(0,m.__)("Loading data...","wordpress-seo-premium")));if(e.length<=0)return(0,t.createElement)("p",null,(0,t.createElement)("em",null,(0,m.__)("We were unable to find internal links on your pages. Either you haven't added any internal links to your content yet, or Yoast SEO didn't index them. You can have Yoast SEO index your links by running the SEO data optimization under SEO > Tools.","wordpress-seo-premium")));const a=e.map((e=>e.id));return(0,t.createElement)("table",{className:"yoast_help"},(0,t.createElement)("thead",null,(0,t.createElement)("tr",null,(0,t.createElement)("th",null,(0,m.__)("Incoming links","wordpress-seo-premium")),(0,t.createElement)("th",null,(0,m.__)("Article","wordpress-seo-premium")),(0,t.createElement)("th",null,(0,m.__)("Type","wordpress-seo-premium")),(0,t.createElement)("th",null,(0,m.__)("Action","wordpress-seo-premium")))),(0,t.createElement)("tbody",null,e.map((function(e){return(0,t.createElement)(T,{key:e.id,indexable:e,moveIndexables:n,improvableIds:o})})),r.map((function(e){if(!a.includes(e.id))return(0,t.createElement)(T,{key:e.id,indexable:e,moveIndexables:n,improvableIds:o})}))))}function j(){return(0,t.createElement)(o.Alert,{type:"warning"},(0,m.__)("Please note: Your admin has disabled the cornerstone functionality in the SEO settings. If you want to use this workout, it should be enabled.","wordpress-seo-premium"))}W.cornerstone.chooseCornerstones,W.cornerstone.checkLinks,W.cornerstone.addLinks,W.orphaned.improveRemove,W.orphaned.update,W.orphaned.addLinks,T.propTypes={indexable:a().object.isRequired,moveIndexables:a().func.isRequired,improvableIds:a().array.isRequired},O.propTypes={mostLinked:a().arrayOf(a().object).isRequired,cornerstones:a().arrayOf(a().object).isRequired,moveIndexables:a().func.isRequired,improvableIds:a().array.isRequired,loading:a().bool.isRequired};const F=window.wp.a11y;function $(){const e=new ClipboardJS(".yoast-copy__button");e.on("success",(function(e){const t=(0,m.__)("Copied!","wordpress-seo-premium");e.trigger.focus(),e.trigger.setAttribute("aria-label",t),e.trigger.innerHTML=t,(0,F.speak)(t,"assertive")})),e.on("error",(function(e){const t=(0,m.__)("Copy failed","wordpress-seo-premium");e.trigger.setAttribute("aria-label",t),e.trigger.innerHTML=t,(0,F.speak)(t,"assertive")}))}function B({clipboardText:e}){(0,l.useEffect)($,[]);const r=(0,m.__)("Copy link","wordpress-seo-premium"),n=(0,l.useCallback)((e=>{e.nativeEvent.target.setAttribute("aria-label",r),e.nativeEvent.target.innerText=r}),[]);return(0,t.createElement)(o.Button,{className:"yoast-copy__button","data-clipboard-text":e,"aria-label":r,onBlur:n},r)}function Y({suggestion:e}){return(0,t.createElement)("tr",null,(0,t.createElement)("td",null,w(e.breadcrumb_title)),(0,t.createElement)("td",null,(0,t.createElement)("a",{href:w(e.edit_link),target:"_blank",rel:"noopener noreferrer"},(0,m.__)("Edit to add link","wordpress-seo-premium"),(0,t.createElement)(u,null))))}function A({indexable:e}){const[r,n]=(0,l.useState)([]),[o,s]=(0,l.useState)(!0),a=(0,l.useCallback)((e=>{n(e),s(!1)}),[n,s]);return(0,l.useEffect)((()=>{f(e,a)}),[e.id]),e.purge?null:0===r.length?(0,t.createElement)("tr",null,(0,t.createElement)("td",{colSpan:"2"},(0,t.createElement)("em",null,o?(0,m.__)("Loading link suggestions...","wordpress-seo-premium"):(0,m.__)("We didn’t find any suggestions for this article, but of course you can still add links to articles that you think are related.","wordpress-seo-premium")))):r.map((function(e){return(0,t.createElement)(Y,{key:"suggestion-"+e.id,suggestion:e})}))}function D({indexable:e,finish:r,skip:n,minimumLinks:s}){const a=(0,l.useCallback)(r.bind(null,e),[r,e]),i=(0,l.useCallback)(n.bind(null,e),[n,e]);return e.purge?(0,t.createElement)("td",null,(0,m.__)("You've finished adding links to this article.","wordpress-seo-premium")):(0,t.createElement)("td",null,(0,t.createElement)(B,{clipboardText:e.permalink}),e.incoming_link_count>=s&&(0,t.createElement)("div",null,(0,t.createElement)(o.Button,{className:"yoast-button--primary",onClick:a},(0,m.__)("Finish optimizing","wordpress-seo-premium"))),e.incoming_link_count<s&&(0,t.createElement)("span",{style:{marginLeft:"16px"}},(0,t.createElement)("a",{href:"#orphaned",onClick:i},(0,m.__)("Skip","wordpress-seo-premium"))))}function P({indexable:e,finish:r,skip:n,minimumLinks:o}){const s=e.incoming_link_count?parseInt(e.incoming_link_count,10):0;return(0,t.createElement)(l.Fragment,null,(0,t.createElement)("thead",null,(0,t.createElement)("tr",null,(0,t.createElement)("td",null,(0,t.createElement)("strong",null,w(e.breadcrumb_title)),(0,t.createElement)("div",null,(0,t.createElement)("em",null,(0,m.sprintf)(
// translators: %s is the number of incoming links.
// translators: %s is the number of incoming links.
(0,m._n)("%s incoming link","%s incoming links",s,"wordpress-seo-premium"),s)))),(0,t.createElement)(D,{indexable:e,finish:r,skip:n,minimumLinks:o}))),(0,t.createElement)("tbody",null,(0,t.createElement)(A,{indexable:e})))}B.propTypes={clipboardText:s.PropTypes.string.isRequired},Y.propTypes={suggestion:a().object.isRequired},A.propTypes={indexable:a().object.isRequired},D.propTypes={indexable:a().object.isRequired,finish:a().func.isRequired,skip:a().func.isRequired,minimumLinks:a().number.isRequired},P.propTypes={indexable:a().object.isRequired,finish:a().func.isRequired,skip:a().func.isRequired,minimumLinks:a().number.isRequired};const H=({indexables:e,finish:r,skip:n,minimumLinks:o})=>e.length<=0?(0,t.createElement)("p",null,(0,t.createElement)("em",null,(0,m.__)("You currently haven't selected any articles to improve. Select a few articles in the previous steps to add links to and we will show you link suggestions here.","wordpress-seo-premium"))):(0,t.createElement)("table",{className:"yoast_help yoast_link_suggestions"},e.map((function(e){return(0,t.createElement)(P,{indexable:e,finish:r,skip:n,key:"suggestions-"+e.id,minimumLinks:o})})));H.propTypes={indexables:a().arrayOf(a().object).isRequired,finish:a().func.isRequired,skip:a().func,minimumLinks:a().number},H.defaultProps={minimumLinks:0,skip:()=>{}};const{cornerstoneOn:z,seoDataOptimizationNeeded:M,cornerstoneGuide:U}=window.wpseoPremiumWorkoutsData;function G({toggleStep:e,toggleWorkout:r,isWorkoutFinished:n,isStepFinished:s,getIndexablesByStep:a,moveIndexables:i}){const{toolsPageUrl:c}=window.wpseoWorkoutsData,k=W.cornerstone,[_,y]=(0,l.useState)({cornerstones:[],mostLinked:[]}),[E,b]=(0,l.useState)(!0),w=(0,l.useCallback)((e=>{y(e),b(!1)}),[y,b]);(0,l.useEffect)((()=>{v(w)}),[n]);const g=(0,l.useCallback)((e=>{i(L.cornerstone,[e],W.cornerstone.addLinks,"")}),[i]),f=(0,l.useCallback)(e.bind(null,"cornerstone",k.checkLinks),[e,k.checkLinks]),x=(0,l.useCallback)(e.bind(null,"cornerstone",k.chooseCornerstones),[e,k.chooseCornerstones]),C=(0,l.useCallback)(e.bind(null,"cornerstone",k.addLinks),[e,k.addLinks]),R=(0,l.useCallback)(r.bind(null,"cornerstone"),[r]),I=a(L.cornerstone,W.cornerstone.addLinks);let N=[];return(0,S.isEmpty)(I)||(N=I.filter((e=>!0!==e.purge)).map((e=>e.id))),(0,t.createElement)("div",{className:"card"},(0,t.createElement)("h2",null,(0,m.__)("The cornerstone approach","wordpress-seo-premium")),(0,t.createElement)("h3",null,(0,m.__)("Rank with articles you want to rank with","wordpress-seo-premium")),"1"!==z&&(0,t.createElement)(j,null),"1"===M&&(0,t.createElement)(h,{url:c}),(0,t.createElement)("p",null,p((0,m.sprintf)(/* translators: %1$s is an opening emphasis tag, %2$s a closing emphasis tag, and %3$s is the company name, Yoast. */ /* translators: %1$s is an opening emphasis tag, %2$s a closing emphasis tag, and %3$s is the company name, Yoast. */
(0,m.__)("Some articles on your site are %1$sthe%2$s most important. They answer people's questions and solve their problems. So, they deserve to rank! At %3$s, we call these cornerstone articles. One of the ways to have them rank is to point enough links to them. More links signal to search engines that those articles are important and valuable. In this workout, we'll help you add links to your cornerstone articles!","wordpress-seo-premium"),"<em>","</em>","Yoast"),{em:(0,t.createElement)("em",null)})),(0,t.createElement)("p",null,p((0,m.sprintf)(
// translators: %1$s and %6$s are emphasis tags, %2$s and %5$s are anchor tags, %3$s and %4$s expand to an icon tag. %7$s is Yoast SEO Premium.
// translators: %1$s and %6$s are emphasis tags, %2$s and %5$s are anchor tags, %3$s and %4$s expand to an icon tag. %7$s is Yoast SEO Premium.
(0,m.__)("%1$sNeed more guidance? We've covered every step in more detail in: %2$sHow to use the %7$s cornerstone workout%3$s%4$s%5$s.%6$s","wordpress-seo-premium"),"<em>","<a>","<icon>","</icon>","</a>","</em>","Yoast SEO Premium"),{icon:(0,t.createElement)(u,null),a:(0,t.createElement)("a",{href:U,target:"_blank",rel:"noopener noreferrer"}),em:(0,t.createElement)("em",null)})),(0,t.createElement)("hr",null),(0,t.createElement)("ol",{className:"workflow yoast"},(0,t.createElement)("li",{className:"step"+(s("cornerstone",k.chooseCornerstones)?" finished faded":"")},(0,t.createElement)("h4",null,(0,m.__)("Start: Choose your cornerstones!","wordpress-seo-premium")),(0,t.createElement)("div",{className:"workflow__grid"},(0,t.createElement)("div",null,(0,t.createElement)("p",null,(0,m.__)("Which articles do you want to rank the highest? Which ones would your audience find the most useful and complete? Click the downward pointing arrow and look for articles that fit those criteria. We'll automatically mark the articles you select from the list as cornerstone.","wordpress-seo-premium")),(0,t.createElement)("p",null,(0,m.__)("Do all of your cornerstones have green bullets? For the best results, consider editing the ones that don't!","wordpress-seo-premium"))),(0,t.createElement)("div",null,(0,t.createElement)("img",{className:"workflow__image",src:"https://yoast.com/shared-assets/images/wpseo_workouts/17-9/motivated_bubble_man_1_optim.svg",width:"100",height:"100",alt:""}))),(0,t.createElement)(q,{indexables:_.cornerstones,loading:E,setCornerstones:w,isDisabled:s("cornerstone",k.chooseCornerstones)}),(0,t.createElement)("br",null),(0,t.createElement)(d,{onClick:x,isFinished:s("cornerstone",k.chooseCornerstones)})),(0,t.createElement)("li",{className:"step"+(s("cornerstone",k.checkLinks)?" finished faded":"")},(0,t.createElement)("h4",null,(0,m.__)("Check the number of incoming internal links of your cornerstones","wordpress-seo-premium")),(0,t.createElement)("p",null,(0,m.sprintf)(
// translators: %1$s is replaced with a star icon ★
// translators: %1$s is replaced with a star icon ★
(0,m.__)("Take a look at the list below. Do your cornerstones (marked with %1$s) have the most internal links pointing towards them? Click the Optimize button if you think a cornerstone needs more links. That will move the article to the next step.","wordpress-seo-premium"),"★")),(0,t.createElement)(O,{mostLinked:_.mostLinked,cornerstones:_.cornerstones,moveIndexables:i,improvableIds:N,loading:E}),(0,t.createElement)("br",null),(0,t.createElement)(d,{onClick:f,isFinished:s("cornerstone",k.checkLinks)})),(0,t.createElement)("li",{className:"step"+(s("cornerstone",k.addLinks)?" finished faded":"")},(0,t.createElement)("h4",null,(0,m.__)("Add internal links towards your cornerstones","wordpress-seo-premium")),(0,t.createElement)("p",null,(0,m.__)("Time to add some links! Below, you see a list with your cornerstones. Under each cornerstone, there are suggestions for articles you could add a link from. When adding the link, make sure to insert it in a relevant sentence related to your cornerstone article. Keep adding links from as many related articles as you need, until your cornerstones have the most internal links pointing towards them.","wordpress-seo-premium")),(0,t.createElement)(H,{indexables:a(L.cornerstone,W.cornerstone.addLinks),finish:g}),(0,t.createElement)("br",null),(0,t.createElement)(d,{onClick:C,isFinished:s("cornerstone",k.addLinks)})),(0,t.createElement)("li",{className:"step"+(n?" finished faded":"")},(0,t.createElement)("h4",null,(0,m.__)("Well done!","wordpress-seo-premium")),(0,t.createElement)("div",{className:"workflow__grid"},(0,t.createElement)("div",null,(0,t.createElement)("p",null,(0,m.__)("You just made your best content easy to find, and more likely to rank! Way to go! From time to time, remember to check if your cornerstones are getting enough links!","wordpress-seo-premium")),(0,t.createElement)(o.Button,{className:"yoast-button yoast-button--primary",onClick:R},n?(0,m.__)("Reset this workout","wordpress-seo-premium"):(0,m.__)("I've finished this workout","wordpress-seo-premium"))),(0,t.createElement)("div",null,(0,t.createElement)("img",{className:"workflow__image",src:"https://yoast.com/shared-assets/images/wpseo_workouts/17-9/fit_bubble_man_1_optim.svg",width:"120",height:"120",alt:"",style:{maxWidth:"120px",maxHeight:"120px"}}))))))}G.propTypes={toggleStep:a().func.isRequired,toggleWorkout:a().func.isRequired,isWorkoutFinished:a().bool.isRequired,isStepFinished:a().func.isRequired,getIndexablesByStep:a().func.isRequired,moveIndexables:a().func.isRequired};const J=(0,c.compose)([(0,i.withSelect)((e=>{const t=e("yoast-seo/workouts").getWorkouts(),r=e("yoast-seo/workouts").getFinishedWorkouts(),n=r.includes(L.cornerstone);return{finishedWorkouts:r,isStepFinished:(e,r)=>t[e].finishedSteps.includes(r),isWorkoutFinished:n,getIndexablesByStep:e("yoast-seo/workouts").getIndexablesByStep}})),(0,i.withDispatch)((e=>{const{toggleStep:t,toggleWorkout:r,moveIndexables:n}=e("yoast-seo/workouts");return{toggleStep:t,toggleWorkout:r,moveIndexables:n}}))])(G),K=window.wp.components,{scoreToRating:Q}=_.interpreters,V=({indexable:e,moveIndexables:r})=>{const[n,s]=(0,l.useState)(!1);(0,l.useEffect)((()=>{"post"===e.object_type&&(s("Loading..."),async function(e,t){try{const r=await E()({path:"yoast/v1/workouts/last_updated?postId="+e}),n=await r.json;return t(new Date(n).toDateString()),n}catch(e){return console.error(e.message),!1}}(e.object_id,s))}),[e.id]);const a=!!e.purge;return(0,t.createElement)("tr",null,(0,t.createElement)("td",null,(0,t.createElement)(o.SvgIcon,{...g(Q(e.primary_focus_keyword_score/10))})),(0,t.createElement)("td",null,(0,t.createElement)(o.SvgIcon,{...g(Q(e.readability_score/10))})),(0,t.createElement)("td",null,(0,t.createElement)("a",{href:e.permalink,target:"_blank",rel:"noopener noreferrer"},w(e.breadcrumb_title),(0,t.createElement)(u,null))),(0,t.createElement)("td",null,n||(0,t.createElement)("em",null,(0,m.__)("Unknown","wordpress-seo-premium"))),!a&&(0,t.createElement)("td",null,(0,t.createElement)(K.CheckboxControl,{onChange:()=>{r(L.orphaned,[e],W.orphaned.update,W.orphaned.addLinks)}})),a&&(0,t.createElement)("td",null,(0,t.createElement)("em",null,(0,m.__)("You've moved this article to the next step.","wordpress-seo-premium"))))};V.propTypes={indexable:a().object.isRequired,moveIndexables:a().func.isRequired};const X=({indexables:e,moveIndexables:r})=>{const n=(0,m.__)("SEO score","wordpress-seo-premium"),o=(0,m.__)("Readability score","wordpress-seo-premium");return e.length>0?(0,t.createElement)("table",{className:"yoast_help"},(0,t.createElement)("thead",null,(0,t.createElement)("tr",null,(0,t.createElement)("th",{className:"manage-column"},(0,t.createElement)("span",{"data-label":n,className:"yoast-tooltip yoast-tooltip-n yoast-tooltip-alt"},(0,t.createElement)("span",{className:"yoast-column-seo-score yoast-column-header-has-tooltip"},(0,t.createElement)("span",{className:"screen-reader-text"},n)))),(0,t.createElement)("th",{className:"manage-column"},(0,t.createElement)("span",{"data-label":o,className:"yoast-tooltip yoast-tooltip-n yoast-tooltip-alt"},(0,t.createElement)("span",{className:"yoast-column-readability yoast-column-header-has-tooltip"},(0,t.createElement)("span",{className:"screen-reader-text"},o)))),(0,t.createElement)("th",null,(0,m.__)("Article","wordpress-seo-premium")),(0,t.createElement)("th",null,(0,m.__)("Last Updated","wordpress-seo-premium")),(0,t.createElement)("th",null,(0,m.__)("Is it up-to-date?","wordpress-seo-premium")))),(0,t.createElement)("tbody",null,e.map((function(e){return(0,t.createElement)(V,{key:"improvable-"+e.id,indexable:e,moveIndexables:r})})))):(0,t.createElement)("p",null,(0,t.createElement)("em",null,(0,m.__)("You haven't selected any articles for this step yet. You can do so in the previous step.","wordpress-seo-premium")))};X.propTypes={indexables:a().arrayOf(a().object).isRequired,moveIndexables:a().func.isRequired};const Z=({improved:e,removed:r,noindexed:n,skipped:o})=>e.length>0||r.length>0||n.length>0||o.length>0?(0,t.createElement)("table",{className:"yoast_help"},(0,t.createElement)("thead",null,(0,t.createElement)("tr",null,(0,t.createElement)("th",null,(0,m.__)("Article","wordpress-seo-premium")),(0,t.createElement)("th",null,(0,m.__)("Resolution","wordpress-seo-premium")))),(0,t.createElement)("tbody",null,e.map((function(e){return(0,t.createElement)("tr",{key:"improved-"+e.id},(0,t.createElement)("td",null,(0,t.createElement)("a",{href:e.permalink,target:"_blank",rel:"noopener noreferrer"},w(e.breadcrumb_title),(0,t.createElement)(u,null))),(0,t.createElement)("td",null,(0,m.__)("Improved","wordpress-seo-premium")))})),r.map((function(e){return(0,t.createElement)("tr",{key:"removed-"+e.id},(0,t.createElement)("td",null,(0,t.createElement)("a",{href:e.permalink,target:"_blank",rel:"noopener noreferrer"},w(e.breadcrumb_title),(0,t.createElement)(u,null))),(0,t.createElement)("td",null,(0,m.__)("Removed","wordpress-seo-premium")))})),n.map((function(e){return(0,t.createElement)("tr",{key:"noindexed"+e.id},(0,t.createElement)("td",null,(0,t.createElement)("a",{href:e.permalink,target:"_blank",rel:"noopener noreferrer"},w(e.breadcrumb_title),(0,t.createElement)(u,null))),(0,t.createElement)("td",null,(0,m.__)("Hidden from search engines.","wordpress-seo-premium")))})),o.map((function(e){return(0,t.createElement)("tr",{key:"skipped"+e.id},(0,t.createElement)("td",null,(0,t.createElement)("a",{href:e.permalink,target:"_blank",rel:"noopener noreferrer"},w(e.breadcrumb_title),(0,t.createElement)(u,null))),(0,t.createElement)("td",null,(0,m.__)("Skipped","wordpress-seo-premium")))})))):(0,t.createElement)("p",null,(0,t.createElement)("em",null,(0,m.__)("You haven't cleaned up or updated any articles yet using this workout. Once you do, a summary of your work will show up here.","wordpress-seo-premium")));Z.propTypes={improved:a().arrayOf(a().object).isRequired,removed:a().arrayOf(a().object).isRequired,noindexed:a().arrayOf(a().object).isRequired,skipped:a().arrayOf(a().object).isRequired};const ee=({indexable:e,moveIndexables:r})=>{const{homeUrl:n}=window.wpseoWorkoutsData,[s,a]=(0,l.useState)(!1),[i,c]=(0,l.useState)([]),[d,u]=(0,l.useState)(n),[h,k]=(0,l.useState)(""),[_,y]=(0,l.useState)(!0),[E,b]=(0,l.useState)("yoast-redirect-to-homepage"),g=(0,l.useCallback)((e=>{c(e),y(!1)}),[b,y]);(0,l.useEffect)((()=>{s&&f(e,g)}),[s]);const v=(0,l.useCallback)((()=>a(!1)),[]),C=(0,l.useCallback)((()=>a(!0)),[]),R=(0,l.useCallback)((()=>{x(e,d),r(L.orphaned,[e],W.orphaned.improveRemove,W.orphaned.removed),v()}),[x,e,d,r,v]),S=(0,l.useCallback)((e=>{u(e.target.value),b("yoast-redirect-to-homepage")}),[u,b]),I=(0,l.useCallback)((e=>{u(e.target.value),b("yoast-custom-redirect")}),[u,b]),N=(0,l.useCallback)((e=>{k(e.target.value),u(e.target.value),b("yoast-custom-redirect")}),[k,u,b]);return(0,t.createElement)(l.Fragment,null,(0,t.createElement)(o.Button,{onClick:C,className:"yoast__workout__remove-article",style:{color:"red"}},(0,m.__)("Remove","wordpress-seo-premium")),s&&(0,t.createElement)(K.Modal,{onRequestClose:v,title:(0,m.__)("SEO Workout: Remove article","wordpress-seo-premium"),className:"yoast__workout",icon:(0,t.createElement)("span",{className:"yoast-icon"})},(0,t.createElement)("p",null,p((0,m.sprintf)(
// translators: %1$s and %3$s expand to an opening and closing anchor tag, respectively, that links to the article that is about to be removed. %2$s is the title of this article.
// translators: %1$s and %3$s expand to an opening and closing anchor tag, respectively, that links to the article that is about to be removed. %2$s is the title of this article.
(0,m.__)("You are about to remove %1$s%2$s%3$s. To prevent 404s on your site, you should redirect it to another page on your site. Where would you like to redirect it?","wordpress-seo-premium"),"<a>",w(e.breadcrumb_title),"</a>"),{a:(0,t.createElement)("a",{href:e.permalink})})),!_&&(0,t.createElement)("div",{className:"yoast__redirect-suggestions"},(0,t.createElement)("div",null,(0,t.createElement)("input",{type:"radio",id:"yoast-redirect-to-homepage",value:n,checked:"yoast-redirect-to-homepage"===E,onChange:S}),(0,t.createElement)("label",{htmlFor:"yoast-redirect-to-homepage"},(0,m.__)("Home page:","wordpress-seo-premium")+" ",(0,t.createElement)("a",{href:n},n))),i.length>0&&i.map((function(e){return(0,t.createElement)("div",{key:"redirect-suggestion-"+e.id},(0,t.createElement)("input",{type:"radio",id:"yoast-redirect-to-indexable-"+e.id,value:e.permalink,checked:E==="yoast-redirect-to-indexable-"+e.id,onChange:t=>{u(t.target.value),b("yoast-redirect-to-indexable-"+e.id)}}),(0,t.createElement)("label",{htmlFor:"yoast-redirect-to-indexable-"+e.id},(0,m.__)("Related article:","wordpress-seo-premium")+" ",(0,t.createElement)("a",{href:e.permalink,target:"_blank",rel:"noopener noreferrer"},e.breadcrumb_title)))})),(0,t.createElement)("div",null,(0,t.createElement)("input",{type:"radio",id:"yoast-custom-redirect",value:h,checked:"yoast-custom-redirect"===E,onChange:I}),(0,t.createElement)("label",{htmlFor:"yoast-custom-redirect"},(0,m.__)("Custom url:","wordpress-seo-premium"),(0,t.createElement)("input",{type:"text",onChange:N,value:h}))),(0,t.createElement)("br",null),(0,t.createElement)(o.Button,{onClick:R,className:"yoast__workout__remove-and-redirect"},(0,m.__)("Remove and redirect","wordpress-seo-premium"))),_&&(0,t.createElement)("p",null,(0,t.createElement)("em",null,(0,m.__)("Loading redirect options...","wordpress-seo-premium")))))};ee.propTypes={indexable:a().object.isRequired,moveIndexables:a().func.isRequired};const{scoreToRating:te}=_.interpreters,re=({indexables:e,moveIndexables:r})=>{const n=(0,m.__)("SEO score","wordpress-seo-premium"),s=(0,m.__)("Readability score","wordpress-seo-premium");return e.length>0?(0,t.createElement)("table",{className:"yoast_help"},(0,t.createElement)("thead",null,(0,t.createElement)("tr",null,(0,t.createElement)("th",{className:"manage-column"},(0,t.createElement)("span",{"data-label":n,className:"yoast-tooltip yoast-tooltip-n yoast-tooltip-alt"},(0,t.createElement)("span",{className:"yoast-column-seo-score yoast-column-header-has-tooltip"},(0,t.createElement)("span",{className:"screen-reader-text"},n)))),(0,t.createElement)("th",{className:"manage-column"},(0,t.createElement)("span",{"data-label":s,className:"yoast-tooltip yoast-tooltip-n yoast-tooltip-alt"},(0,t.createElement)("span",{className:"yoast-column-readability yoast-column-header-has-tooltip"},(0,t.createElement)("span",{className:"screen-reader-text"},s)))),(0,t.createElement)("th",null,(0,m.__)("Article","wordpress-seo-premium")),(0,t.createElement)("th",null,(0,m.__)("Action","wordpress-seo-premium")))),(0,t.createElement)("tbody",null,e.slice(0,10).map((function(e){const n=!!e.purge,s=(0,l.useCallback)((()=>{r(L.orphaned,[e],W.orphaned.improveRemove,W.orphaned.update)}),[r,e]),a=(0,l.useCallback)((()=>{window.confirm((0,m.__)("Are you sure you wish to hide this article from search engines?","wordpress-seo-premium"))&&(async function(e){try{const t=await E()({path:"yoast/v1/workouts/noindex",method:"POST",data:{object_id:e.object_id,object_type:e.object_type,object_sub_type:e.object_sub_type}});return await t.json}catch(e){return console.error(e.message),!1}}(e),r(L.orphaned,[e],W.orphaned.improveRemove,W.orphaned.noindexed))}),[r,e]);return(0,t.createElement)("tr",{key:"orphaned-"+e.id},(0,t.createElement)("td",null,(0,t.createElement)(o.SvgIcon,{...g(te(e.primary_focus_keyword_score/10))})),(0,t.createElement)("td",null,(0,t.createElement)(o.SvgIcon,{...g(te(e.readability_score/10))})),(0,t.createElement)("td",null,(0,t.createElement)("a",{href:e.permalink,target:"_blank",rel:"noopener noreferrer"},w(e.breadcrumb_title),(0,t.createElement)(u,null))),!n&&(0,t.createElement)("td",null,(0,t.createElement)(o.Button,{onClick:s},(0,m.__)("Improve","wordpress-seo-premium")),(0,t.createElement)(ee,{indexable:e,moveIndexables:r}),(0,t.createElement)(o.Button,{onClick:a},(0,m.__)("Hide from search engines","wordpress-seo-premium"))),n&&(0,t.createElement)("td",null,(0,t.createElement)("em",null,(e=>{switch(e){case W.orphaned.removed:return(0,m.__)("You've removed this article.","wordpress-seo-premium");case W.orphaned.noindexed:return(0,m.__)("You've hidden this article from search engines.","wordpress-seo-premium");case W.orphaned.update:return(0,m.__)("You've moved this article to the next step.","wordpress-seo-premium");default:return""}})(e.movedTo))))})))):(0,t.createElement)("p",null,(0,t.createElement)("em",null,(0,m.__)("Everything's looking good! We haven't found any articles on your site that are older than six months and receive too few links on your site. Check back here later for new cleanup suggestions!","wordpress-seo-premium")))};re.propTypes={indexables:a().arrayOf(a().object).isRequired,moveIndexables:a().func.isRequired};const{seoDataOptimizationNeeded:ne,orphanedGuide:oe,orphanedUpdateContent:se}=window.wpseoPremiumWorkoutsData;function ae({toggleStep:e,toggleWorkout:r,isWorkoutFinished:n,isStepFinished:s,moveIndexables:a,clearIndexablesInSteps:i,getIndexablesByStep:c}){const{toolsPageUrl:h}=window.wpseoWorkoutsData,_=W.orphaned,y=(0,l.useCallback)((()=>e(L.orphaned,_.improveRemove)),[e]),E=(0,l.useCallback)((()=>e(L.orphaned,_.update)),[e]),b=(0,l.useCallback)((()=>e(L.orphaned,_.addLinks)),[e]),w=(0,l.useCallback)((()=>r(L.orphaned)),[r]),g=(0,l.useCallback)((()=>i(L.orphaned,["removed","noindexed","improved","skipped"])),[i]),f=(0,l.useCallback)((e=>{a(L.orphaned,[e],W.orphaned.addLinks,W.orphaned.improved)}),[a]),v=(0,l.useCallback)((e=>{a(L.orphaned,[e],W.orphaned.addLinks,W.orphaned.skipped)}),[a]),x=c(L.orphaned,W.orphaned.improved),C=c(L.orphaned,W.orphaned.removed),R=c(L.orphaned,W.orphaned.noindexed),S=c(L.orphaned,W.orphaned.skipped);return(0,t.createElement)("div",{className:"card"},(0,t.createElement)("h2",null,(0,m.__)("Orphaned content","wordpress-seo-premium")),(0,t.createElement)("h3",null,(0,m.__)("Clean up your unlinked content to make sure people can find it","wordpress-seo-premium")),"1"===ne&&(0,t.createElement)(k,{url:h}),(0,t.createElement)("p",null,(0,m.__)("You might not even know it, but there may be pages on your site that don't get any links. That’s an SEO issue, because it’s difficult for search engines to find pages that don't get any links. So, it's harder for them to rank. We call these pages orphaned content. In this workout, we find the orphaned content on your site and guide you in quickly adding links to it, so it can get a chance to rank!","wordpress-seo-premium")),(0,t.createElement)("p",null,p((0,m.sprintf)(
// translators: %1$s and %6$s are emphasis tags, %2$s and %5$s are anchor tags, %3$s and %4$s expand to an icon tag. %7$s is Yoast SEO Premium.
// translators: %1$s and %6$s are emphasis tags, %2$s and %5$s are anchor tags, %3$s and %4$s expand to an icon tag. %7$s is Yoast SEO Premium.
(0,m.__)("%1$sNeed more guidance? We've covered every step in more detail in the following guide: %2$sHow to use the %7$s orphaned content workout%3$s%4$s%5$s.%6$s","wordpress-seo-premium"),"<em>","<a>","<icon>","</icon>","</a>","</em>","Yoast SEO Premium"),{icon:(0,t.createElement)(u,null),a:(0,t.createElement)("a",{href:oe,target:"_blank",rel:"noopener noreferrer"}),em:(0,t.createElement)("em",null)})),(0,t.createElement)("hr",null),(0,t.createElement)("ol",{className:"workflow yoast"},(0,t.createElement)("li",{className:"step"+(s(L.orphaned,_.improveRemove)?" finished faded":"")},(0,t.createElement)("h4",null,(0,m.__)("Start: Love it or leave it?","wordpress-seo-premium")),(0,t.createElement)("div",{className:"workflow__grid"},(0,t.createElement)("div",null,(0,t.createElement)("p",null,(0,m.__)("Your site may contain lots of content that you created once and never looked back to it since. It's important to go through those pages and ask yourself if that content is still relevant to your site. Should you improve it or remove it?","wordpress-seo-premium"))),(0,t.createElement)("div",null,(0,t.createElement)("img",{className:"workflow__image",src:"https://yoast.com/shared-assets/images/wpseo_workouts/17-9/motivated_bubble_woman_2_optim.svg",width:"100",height:"100",alt:""}))),(0,t.createElement)(re,{indexables:c(L.orphaned,W.orphaned.improveRemove),moveIndexables:a}),(0,t.createElement)("br",null),(0,t.createElement)(d,{onClick:y,isFinished:s(L.orphaned,_.improveRemove)})),(0,t.createElement)("li",{className:"step"+(s(L.orphaned,_.update)?" finished faded":"")},(0,t.createElement)("h4",null,(0,m.__)("Should you update your article?","wordpress-seo-premium")),(0,t.createElement)("p",null,p((0,m.sprintf)(
// translators: %1$s and %2$s are anchor tags.
// translators: %1$s and %2$s are anchor tags.
(0,m.__)("Critically examine the content in this list and make the necessary updates. If you need help updating, we have a very %1$suseful blog post that can guide you all the way%2$s (click to open in a new tab).","wordpress-seo-premium"),"<a>","</a>"),{a:(0,t.createElement)("a",{href:se,target:"_blank",rel:"noopener noreferrer"})})),(0,t.createElement)(X,{indexables:c(L.orphaned,W.orphaned.update),moveIndexables:a}),(0,t.createElement)("br",null),(0,t.createElement)(d,{onClick:E,isFinished:s(L.orphaned,_.update)})),(0,t.createElement)("li",{className:"step"+(s(L.orphaned,_.addLinks)?" finished faded":"")},(0,t.createElement)("h4",null,(0,m.__)("Add internal links towards your orphaned articles.","wordpress-seo-premium")),(0,t.createElement)("p",null,(0,m.__)("Time to add some links! Below, you see a list with your orphaned articles. Under each one, there are suggestions for related pages you could add a link from. When adding the link, make sure to insert it in a relevant sentence related to your orphaned article. Keep adding links to each of the orphaned articles until you are satisfied with the amount of links pointing to them.","wordpress-seo-premium")),(0,t.createElement)(H,{indexables:c(L.orphaned,W.orphaned.addLinks),finish:f,skip:v,minimumLinks:2}),(0,t.createElement)("br",null),(0,t.createElement)(d,{onClick:b,isFinished:s(L.orphaned,_.addLinks)})),(0,t.createElement)("li",{className:"step"+(n?" finished faded":"")},(0,t.createElement)("h4",null,(0,m.__)("Well done!","wordpress-seo-premium")),(0,t.createElement)("div",{className:"workflow__grid"},(0,t.createElement)("div",null,(0,t.createElement)("p",null,(0,m.__)("You've added links to your orphaned articles, and you’ve cleaned up the ones that were no longer relevant. Great job! Take a look at the summary below and celebrate what you accomplished!","wordpress-seo-premium"))),(0,t.createElement)("div",null,(0,t.createElement)("img",{className:"workflow__image",src:"https://yoast.com/shared-assets/images/wpseo_workouts/17-9/fit_bubble_woman_2_optim.svg",width:"120",height:"120",alt:"",style:{maxWidth:"120px",maxHeight:"120px"}}))),(0,t.createElement)(Z,{improved:x,removed:C,noindexed:R,skipped:S}),(0,t.createElement)("br",null),(0,t.createElement)(o.Button,{className:"yoast-button yoast-button--primary orphaned-summary",onClick:w},n?(0,m.__)("Reset this workout","wordpress-seo-premium"):(0,m.__)("I've finished this workout","wordpress-seo-premium"))," ",(x.length>0||C.length>0||R.length>0||S.length>0)&&(0,t.createElement)(o.Button,{className:"yoast-button orphaned-summary",onClick:g},(0,m.__)("Clear summary","wordpress-seo-premium")))))}ae.propTypes={toggleStep:a().func.isRequired,toggleWorkout:a().func.isRequired,isStepFinished:a().func.isRequired,isWorkoutFinished:a().bool.isRequired,getIndexablesByStep:a().func.isRequired,moveIndexables:a().func.isRequired,clearIndexablesInSteps:a().func.isRequired};const le=(0,c.compose)([(0,i.withSelect)((e=>{const t=e("yoast-seo/workouts").getWorkouts(),r=e("yoast-seo/workouts").getFinishedWorkouts(),n=r.includes(L.orphaned);return{finishedWorkouts:r,isStepFinished:(e,r)=>t[e].finishedSteps.includes(r),isWorkoutFinished:n,getIndexablesByStep:e("yoast-seo/workouts").getIndexablesByStep}})),(0,i.withDispatch)((e=>{const{toggleStep:t,toggleWorkout:r,moveIndexables:n,clearIndexablesInSteps:o}=e("yoast-seo/workouts");return{toggleStep:t,toggleWorkout:r,moveIndexables:n,clearIndexablesInSteps:o}}))])(ae),{setTextdomainL10n:ie}=window.yoast.editorModules.helpers.i18n;ie("wordpress-seo-premium","wpseoPremiumJSL10n");const ce=window.yoast.adminModules.components.workouts.CornerstoneWorkoutCard,me=window.yoast.adminModules.components.workouts.OrphanedWorkoutCard;n()((()=>{window.wpseoWorkoutsData.registerWorkout("cornerstone",20,(()=>(0,t.createElement)(ce,{workout:J,badges:[(0,t.createElement)(o.PremiumBadge,{key:"premium-badge-cornerstone-workout"})]}))),window.wpseoWorkoutsData.registerWorkout("orphaned",30,(()=>(0,t.createElement)(me,{workout:le,badges:[(0,t.createElement)(o.PremiumBadge,{key:"premium-badge-orphaned-workout"})]})))}))})();