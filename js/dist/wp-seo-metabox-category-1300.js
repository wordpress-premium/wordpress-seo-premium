(window.yoastWebpackJsonp=window.yoastWebpackJsonp||[]).push([[18],{0:function(e,t){e.exports=React},1:function(e,t){e.exports=window.lodash},107:function(e,t){e.exports=window.wp.compose},14:function(e,t){e.exports=window.wp.components},15:function(e,t,n){"use strict";var r=n(16),o=n(17),a=n(18);e.exports=function(){function e(e,t,n,r,i,s){s!==a&&o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},16:function(e,t,n){"use strict";function r(e){return function(){return e}}var o=function(){};o.thatReturns=r,o.thatReturnsFalse=r(!1),o.thatReturnsTrue=r(!0),o.thatReturnsNull=r(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e},e.exports=o},17:function(e,t,n){"use strict";var r=function(e){};e.exports=function(e,t,n,o,a,i,s,u){if(r(t),!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,o,a,i,s,u],p=0;(c=new Error(t.replace(/%s/g,function(){return l[p++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}}},18:function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},2:function(e,t,n){e.exports=n(15)()},22:function(e,t){e.exports=window.wp.data},3:function(e,t){e.exports=window.wp.i18n},4:function(e,t){e.exports=window.yoast.styledComponents},441:function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(22),i=n(5),s=n(1),u=l(n(442)),c=l(n(65));function l(e){return e&&e.__esModule?e:{default:e}}var p="yoast-seo";!function(e){var t,n,l=wpseoPrimaryCategoryL10n.taxonomies;function f(t){return e("#yoast-wpseo-primary-"+t).val()}function d(t,n){e("#yoast-wpseo-primary-"+t).val(n).trigger("change");var r=(0,a.dispatch)("yoast-seo/editor");if(r){var o=parseInt(n,10);r.setPrimaryTaxonomyId(t,o),"category"===t&&r.updateReplacementVariable("primary_category",function(t){var n=e("#category-all").find("#category-"+t+" > label");if(0===n.length)return"";var r=n.clone();return r.children().remove(),e.trim(r.text())}(o))}}function m(r){var o,a,i;o=e("#"+r+'checklist input[type="checkbox"]:checked');var s=e("#"+r+"checklist li");s.removeClass("wpseo-term-unchecked wpseo-primary-term wpseo-non-primary-term"),e(".wpseo-primary-category-label").remove(),s.addClass("wpseo-term-unchecked"),o.length<=1||o.each(function(o,s){s=e(s),(a=s.closest("li")).removeClass("wpseo-term-unchecked"),function(t){return 1===e(t).closest("li").children(".wpseo-make-primary-term").length}(s)||function(n,r){var o,a;o=e(r).closest("label"),a=t({taxonomy:l[n],term:o.text()}),o.after(a)}(r,s),s.val()===f(r)?(a.addClass("wpseo-primary-term"),(i=s.closest("label")).find(".wpseo-primary-category-label").remove(),i.append(n({taxonomy:l[r]}))):a.addClass("wpseo-non-primary-term")})}function y(t){d(t,e("#"+t+'checklist input[type="checkbox"]:checked:first').val()),m(t)}function h(e){""===f(e)&&y(e)}function w(){(0,c.default)()&&(0,s.get)(window,"wp.hooks.addFilter",s.noop)("editor.PostTaxonomyType",p,function(e){return function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,i.Component),o(n,[{key:"render",value:function(){return wp.element.createElement(u.default,r({OriginalComponent:e},this.props))}}]),n}()})}e.fn.initYstSEOPrimaryCategory=function(){return this.each(function(t,n){var r=e("#"+n.name+"div");m(n.name),r.on("click",'input[type="checkbox"]',function(t){return function(){!1===e(this).prop("checked")&&e(this).val()===f(t)&&y(t),h(t),m(t)}}(n.name)),r.on("wpListAddEnd","#"+n.name+"checklist",function(e){return function(){h(e),m(e)}}(n.name)),r.on("click",".wpseo-make-primary-term",function(t){return function(n){var r;r=e(n.currentTarget).siblings("label").find("input"),d(t,r.val()),m(t),r.focus()}}(n.name))})},e(function(){t=wp.template("primary-term-ui"),n=wp.template("primary-term-screen-reader"),e(_.values(l)).initYstSEOPrimaryCategory(),w()})}(jQuery)},442:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=f(n(0)),a=f(n(2)),i=n(5),s=n(1),u=n(3),c=n(14),l=f(n(4)),p=f(n(443));function f(e){return e&&e.__esModule?e:{default:e}}var d=null,m=null,y=l.default.div.withConfig({displayName:"PrimaryTaxonomyFilter__ErrorContainer",componentId:"sc-15n7j5b-0"})(["margin:16px 0 8px;"]),h=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return d&&m||(d=(0,s.get)(window.wpseoPrimaryCategoryL10n,"taxonomies",{}),m=(0,s.values)(d).map(function(e){return e.name})),e.state={exceptionCaught:!1,error:null},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),r(t,[{key:"componentDidCatch",value:function(e){this.setState({exceptionCaught:!0,error:e})}},{key:"taxonomyHasPrimaryTermSupport",value:function(){return m.includes(this.props.slug)}},{key:"render",value:function(){var e=this.props,t=e.slug,n=e.OriginalComponent;if(this.state.exceptionCaught){var r=(0,s.get)(this.state,"error.stack");return wp.element.createElement(i.Fragment,null,wp.element.createElement(n,this.props),wp.element.createElement(y,null,(0,u.sprintf)((0,u.__)("An error occurred loading the %s primary taxonomy picker.","wordpress-seo"),"Yoast SEO")),r&&wp.element.createElement(c.ClipboardButton,{isLarge:!0,text:r},(0,u.__)("Copy error","wordpress-seo")))}return this.taxonomyHasPrimaryTermSupport()?wp.element.createElement(i.Fragment,null,wp.element.createElement(n,this.props),wp.element.createElement(p.default,{taxonomy:d[t]})):wp.element.createElement(n,this.props)}}]),t}();h.propTypes={OriginalComponent:a.default.func.isRequired,slug:a.default.string.isRequired},t.default=h},443:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=m(n(0)),a=m(n(2)),i=n(22),s=n(107),u=n(3),c=m(n(444)),l=n(445),p=m(n(4)),f=n(1),d=m(n(446));function m(e){return e&&e.__esModule?e:{default:e}}var y=p.default.div.withConfig({displayName:"PrimaryTaxonomyPicker__PrimaryTaxonomyPickerField",componentId:"sc-90k7iy-0"})(["padding-top:16px;"]),h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.onChange=n.onChange.bind(n),n.updateReplacementVariable=n.updateReplacementVariable.bind(n);var r=e.taxonomy,o=r.fieldId,a=r.name;return n.input=document.getElementById(o),e.setPrimaryTaxonomyId(a,parseInt(n.input.value,10)),n.state={selectedTerms:[],terms:[]},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),r(t,[{key:"componentDidMount",value:function(){this.fetchTerms()}},{key:"componentDidUpdate",value:function(e,t){if(e.selectedTermIds.length<this.props.selectedTermIds.length){var n=(0,f.difference)(this.props.selectedTermIds,e.selectedTermIds)[0];if(!this.termIsAvailable(n))return void this.fetchTerms()}e.selectedTermIds!==this.props.selectedTermIds&&this.updateSelectedTerms(this.state.terms,this.props.selectedTermIds),t.selectedTerms!==this.state.selectedTerms&&this.handleSelectedTermsChange()}},{key:"handleSelectedTermsChange",value:function(){var e=this.state.selectedTerms,t=this.props.primaryTaxonomyId;e.find(function(e){return e.id===t})||this.onChange(e.length?e[0].id:-1)}},{key:"termIsAvailable",value:function(e){return!!this.state.terms.find(function(t){return t.id===e})}},{key:"fetchTerms",value:function(){var e=this,t=this.props.taxonomy;t&&(this.fetchRequest=(0,c.default)({path:(0,l.addQueryArgs)("/wp/v2/"+t.restBase,{per_page:-1,orderby:"count",order:"desc",_fields:"id,name"})}),this.fetchRequest.then(function(t){var n=e.state;e.setState({terms:t,selectedTerms:e.getSelectedTerms(t,e.props.selectedTermIds)},function(){0===n.terms.length&&e.state.terms.length>0&&e.updateReplacementVariable(e.props.primaryTaxonomyId)})}))}},{key:"getSelectedTerms",value:function(e,t){return e.filter(function(e){return t.includes(e.id)})}},{key:"updateSelectedTerms",value:function(e,t){var n=this.getSelectedTerms(e,t);this.setState({selectedTerms:n})}},{key:"onChange",value:function(e){var t=this.props.taxonomy.name;this.updateReplacementVariable(e),this.props.setPrimaryTaxonomyId(t,e),this.input.value=-1===e?"":e}},{key:"updateReplacementVariable",value:function(e){if("category"===this.props.taxonomy.name){var t=this.state.selectedTerms.find(function(t){return t.id===e});this.props.updateReplacementVariable("primary_"+this.props.taxonomy.name,t?t.name:"")}}},{key:"render",value:function(){var e=this.props,t=e.primaryTaxonomyId,n=e.taxonomy;if(this.state.selectedTerms.length<2)return null;var r="yoast-primary-"+n.name+"-picker";return wp.element.createElement(y,{className:"components-base-control__field"},wp.element.createElement("label",{htmlFor:r,className:"components-base-control__label"},(0,u.sprintf)((0,u.__)("Select the primary %s","wordpress-seo"),n.singularLabel.toLowerCase())),wp.element.createElement(d.default,{value:t,onChange:this.onChange,id:r,terms:this.state.selectedTerms}))}}]),t}();h.propTypes={selectedTermIds:a.default.arrayOf(a.default.number),primaryTaxonomyId:a.default.number,setPrimaryTaxonomyId:a.default.func,updateReplacementVariable:a.default.func,receiveEntityRecords:a.default.func,taxonomy:a.default.shape({name:a.default.string,fieldId:a.default.string,restBase:a.default.string,singularLabel:a.default.string})},t.default=(0,s.compose)([(0,i.withSelect)(function(e,t){var n=e("core/editor"),r=e("yoast-seo/editor"),o=t.taxonomy;return{selectedTermIds:n.getEditedPostAttribute(o.restBase)||[],primaryTaxonomyId:r.getPrimaryTaxonomyId(o.name)}}),(0,i.withDispatch)(function(e){var t=e("yoast-seo/editor");return{setPrimaryTaxonomyId:t.setPrimaryTaxonomyId,updateReplacementVariable:t.updateReplacementVariable}})])(h)},444:function(e,t){e.exports=window.wp.apiFetch},445:function(e,t){e.exports=window.wp.url},446:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});i(n(0));var r=i(n(2)),o=i(n(4)),a=n(1);function i(e){return e&&e.__esModule?e:{default:e}}var s=o.default.div.withConfig({displayName:"TaxonomyPicker__SelectContainer",componentId:"indmtn-0"})(["padding-top:6px;"]),u=function(e){var t=e.value,n=e.id,r=e.terms,o=e.onChange;return wp.element.createElement(s,null,wp.element.createElement("select",{className:"components-select-control__input",id:n,value:t,onChange:function(e){o(parseInt(e.target.value,10))}},r.map(function(e){return wp.element.createElement("option",{key:e.id,value:e.id},(0,a.unescape)(e.name))})))};u.propTypes={terms:r.default.arrayOf(r.default.shape({id:r.default.string.isRequired,name:r.default.string.isRequired})),onChange:r.default.func.isRequired,id:r.default.string,value:r.default.string},t.default=u},5:function(e,t){e.exports=window.wp.element},65:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);t.default=function(){return!(0,r.isNil)(window.wp)&&!(0,r.isNil)(wp.data)&&!(0,r.isNil)(wp.data.select("core/edit-post"))&&!(0,r.isNil)(wp.data.select("core/editor"))&&(0,r.isFunction)(wp.data.select("core/editor").getEditedPostAttribute)}}},[[441,0]]]);